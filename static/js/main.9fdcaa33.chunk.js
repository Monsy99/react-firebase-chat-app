(this["webpackJsonpreact-firebase-chat-app"]=this["webpackJsonpreact-firebase-chat-app"]||[]).push([[0],{52:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t(1),a=t.n(c),o=t(35),i=t.n(o),u=t(15),s=(t(33),t(29),t(14)),b=t(19),d=t.n(b),l=t(25),f=t(26),j=t(20),p=t(7),x=t(5),h=t(6),O=t(18);function m(){var e=Object(x.a)(["\n  width: 100%;\n  padding: 4px 12px;\n  border-bottom: 1px solid #eee;\n"]);return m=function(){return e},e}function g(){var e=Object(x.a)(["\n  text-decoration: none;\n  color: #ccc;\n  width: 100%;\n"]);return g=function(){return e},e}function v(){var e=Object(x.a)(["\n  border-right: 1px solid rgba(255, 255, 255, 0.6);\n"]);return v=function(){return e},e}var w=h.b.div(v()),k=Object(h.b)(O.b)(g()),y=h.b.div(m()),z=function(e){var n=e.auth,t=e.firestore,a=e.db,o=Object(p.e)().roomRef,i=t.collection("chatrooms"),u=Object(j.a)(i),b=Object(s.a)(u,1)[0],x=Object(j.a)(i.doc(o).collection("messages")),h=Object(s.a)(x,1)[0],O=Object(c.useState)(""),m=Object(s.a)(O,2),g=m[0],v=m[1],z=b?b.find((function(e){return o===e.ref})):null,S=i.doc(o).collection("messages");console.log(h);var A=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.add({value:"siemka"});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(w,{children:[Object(r.jsx)("p",{children:"Formularz do dodawania czat\xf3w do wyrzucenia do popup'u"}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=Object(f.a)();try{""!==g.trim()&&i.doc(t).set({createdAt:a.firestore.FieldValue.serverTimestamp(),title:g,creator:n.currentUser.uid,ref:t,private:!1,messages:[]})}catch(e){console.log(e)}},children:[Object(r.jsx)("input",{placeholder:"Tytu\u0142 czatu",value:g,onChange:function(e){v(e.target.value)}}),Object(r.jsx)("button",{children:"submit"})]}),Object(r.jsx)("button",{onClick:function(){console.log("chatrooms: ",b),console.log("user:",n.X),console.log("parameters:",o),console.log("current room:",z)},children:"Log status"}),Object(r.jsx)("button",{onClick:A,children:"Siemka Button"}),b?b.map((function(e){return Object(r.jsx)(y,{children:Object(r.jsx)(k,{to:"/".concat(e.ref),children:Object(r.jsx)("header",{children:e.title})})},"".concat(e.ref))})):""]})};function S(){var e=Object(x.a)(["\n  padding: 12px 20px;\n  font-size: 26px;\n  background-color: #333;\n  border: none;\n  color: white;\n"]);return S=function(){return e},e}function A(){var e=Object(x.a)(['\n  font-family: "Roboto", sans-serif;\n  padding: 12px;\n  flex-grow: 1;\n  font-size: 16px;\n  color: #ddd;\n  background-color: #222;\n  border-radius: 0;\n  border: none;\n  &::placeholder {\n  }\n  &:focus {\n    border: none;\n    outline: none;\n    background-color: #333;\n  }\n']);return A=function(){return e},e}function U(){var e=Object(x.a)(["\n  width: calc(100% - 300px);\n  margin: 0;\n  padding: 0;\n  display: flex;\n  position: fixed;\n  bottom: 0;\n"]);return U=function(){return e},e}function I(){var e=Object(x.a)(["\n  font-size: 14px;\n  text-align: center;\n  flex-grow: 0;\n  color: #ccc;\n  margin: 0 8px;\n"]);return I=function(){return e},e}function R(){var e=Object(x.a)(["\n  font-size: 18px;\n  background-color: #444;\n  padding: 8px 12px;\n  margin: 0 8px;\n  border-radius: 10px;\n"]);return R=function(){return e},e}function C(){var e=Object(x.a)(["\n  width: 45px;\n  border-radius: 50%;\n  align-self: flex-start;\n"]);return C=function(){return e},e}function D(){var e=Object(x.a)(["\n  display: flex;\n  width: 100%;\n  align-items: center;\n  margin: 8px 0;\n  flex-direction: ",";\n"]);return D=function(){return e},e}function L(){var e=Object(x.a)(["\n  list-style: none;\n  display: flex;\n  flex-direction: column;\n  margin: 0px;\n  padding: 16px;\n"]);return L=function(){return e},e}function B(){var e=Object(x.a)(["\n  width: 100%;\n  max-width: 1200px;\n  margin: 0 auto;\n  margin-bottom: 60px;\n"]);return B=function(){return e},e}var F=h.b.section(B()),T=h.b.ul(L()),V=h.b.li(D(),(function(e){return e.isAuthor?"row-reverse":"unset"})),E=h.b.img(C()),G=h.b.p(R()),H=h.b.div(I()),K=h.b.form(U()),W=h.b.input(A()),J=h.b.button(S()),M=function(e){var n=e.firebase,t=n.firestore(),a=n.auth(),o=Object(p.e)().roomRef,i=t.collection("chatrooms"),u=i.doc(o).collection("messages"),b=Object(j.a)(i),x=Object(s.a)(b,1)[0],h=u.orderBy("createdAt"),O=Object(j.a)(h),m=Object(s.a)(O,1)[0],g=(x&&x.find((function(e){return o===e.ref})),Object(c.useState)("")),v=Object(s.a)(g,2),w=v[0],k=v[1];Object(c.useEffect)((function(){z.current&&z.current.scrollIntoView({behavior:"smooth"})}),[m]);var y=function(){var e=Object(l.a)(d.a.mark((function e(t){var r,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=a.currentUser,c=r.uid,o=r.photoURL,""===w.trim()){e.next=6;break}return e.next=5,u.add({text:w,createdAt:n.firestore.FieldValue.serverTimestamp(),uid:c,photoURL:o});case 5:k("");case 6:z.current&&z.current.scrollIntoView({behavior:"smooth"});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),z=Object(c.useRef)(),S=a.currentUser?a.currentUser.uid:null;return Object(r.jsx)(F,{children:a&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(T,{children:[m&&m.map((function(e){return Object(r.jsxs)(V,{isAuthor:e.uid===S,className:e.id,children:[Object(r.jsx)(E,{alt:"avatar",src:e.photoURL}),Object(r.jsx)(G,{children:e.text}),Object(r.jsx)(H,{children:e.createdAt?"".concat(new Date(1e3*e.createdAt.seconds).toLocaleTimeString(),"\n                     ").concat(new Date(1e3*e.createdAt.seconds).toLocaleDateString()):""})]},Object(f.a)())})),Object(r.jsx)("div",{ref:z})]}),Object(r.jsxs)(K,{onSubmit:y,children:[Object(r.jsx)(W,{placeholder:"Write a message here",value:w,onChange:function(e){k(e.target.value)}}),Object(r.jsx)(J,{children:"\u2b06\ufe0f"})]})]})})},N=t(39);function P(){var e=Object(x.a)(["\n  display: grid;\n  width: 100%;\n  grid-template-columns: 300px 1fr;\n"]);return P=function(){return e},e}var Q=h.b.div(P()),X=function(e){var n=e.firebase,t=n.firestore(),c=n.auth(),a=Object(N.a)(c),o=Object(s.a)(a,1)[0];return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(Q,{children:[Object(r.jsx)(z,{db:n,firestore:t,auth:c}),o?Object(r.jsx)(M,{firebase:n,firestore:t,auth:c}):""]})})};function Z(){var e=Object(x.a)(['\n  margin: 0 12px;\n  font-family: "Sansita Swashed", cursive;\n  font-size: 28px;\n  font-weight: bold;\n  color: #eee;\n  padding: 12px;\n']);return Z=function(){return e},e}function q(){var e=Object(x.a)(["\n  width: 100%;\n  max-width: 1200px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0 auto;\n  box-shadow: 0 0px 5px rgba(255, 255, 255, 0.6);\n"]);return q=function(){return e},e}var Y=h.b.nav(q()),$=h.b.h1(Z());function _(){var e=Object(x.a)(["\n  background-color: blue;\n  outline: none;\n  color: white;\n  font-size: 18px;\n  padding: 10px 20px;\n  margin-right: 12px;\n  border: none;\n  border-radius: 10px;\n"]);return _=function(){return e},e}var ee=h.b.button(_()),ne=function(e){var n=e.children,t=e.onClick;return Object(r.jsx)(ee,{onClick:t,children:n})},te=function(e){var n=e.auth;return n.currentUser&&Object(r.jsx)(ne,{onClick:function(){return n.signOut()},children:"Sign out"})},re=function(e){var n=e.auth;return Object(r.jsx)(ne,{onClick:function(){var e=new u.a.auth.GoogleAuthProvider;n.signInWithPopup(e)},children:"Sign in with Google"})},ce=function(e){var n=e.firebase.auth();return Object(c.useEffect)((function(){}),[n.currentUser]),console.log(n.currentUser),Object(r.jsxs)(Y,{children:[Object(r.jsx)($,{children:"Chat App"}),n.currentUser?Object(r.jsx)(te,{auth:n}):Object(r.jsx)(re,{auth:n})]})};u.a.initializeApp({apiKey:"AIzaSyDWBkQjdvZjHIpip9Z1bm9IpDmzc1XxQmM",authDomain:"react-firebase-chat-app-505e9.firebaseapp.com",databaseURL:"https://react-firebase-chat-app-505e9.firebaseio.com",projectId:"react-firebase-chat-app-505e9",storageBucket:"react-firebase-chat-app-505e9.appspot.com",messagingSenderId:"56873190707",appId:"1:56873190707:web:ae292904dd7bcdb7542a46",measurementId:"G-NKK3HT6H63"});var ae=function(){return u.a&&u.a.auth(),Object(r.jsxs)(O.a,{children:[Object(r.jsxs)(p.a,{path:"/:roomRef",children:[Object(r.jsx)(ce,{firebase:u.a}),Object(r.jsx)(X,{firebase:u.a})]}),Object(r.jsx)(p.a,{path:"/",exact:!0,children:Object(r.jsx)(X,{firebase:u.a})})]})};function oe(){var e=Object(x.a)(["\n    *,*::before,*::after{\n    box-sizing:border-box;\n    }\n    body {\n    margin: 0;\n    color: white;\n    background-color: black;\n    font-family: 'Roboto', sans-serif;\n    }\n"]);return oe=function(){return e},e}var ie=Object(h.a)(oe());i.a.render(Object(r.jsxs)(a.a.StrictMode,{children:[Object(r.jsx)(ie,{}),Object(r.jsx)(ae,{})]}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.9fdcaa33.chunk.js.map