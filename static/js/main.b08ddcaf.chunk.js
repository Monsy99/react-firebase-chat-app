(this["webpackJsonpreact-firebase-chat-app"]=this["webpackJsonpreact-firebase-chat-app"]||[]).push([[0],{58:function(n,e,t){"use strict";t.r(e);var r=t(2),o=t(1),c=t.n(o),i=t(27),a=t.n(i),u=t(9),s=t(4),d=t(11),l=t(12),b=t(8),f=t(5),j=t(17);function p(){var n=Object(f.a)(['\n  margin: 0;\n  font-family: "Sansita Swashed", cursive;\n  font-size: 24px;\n  text-decoration: none;\n  font-weight: bold;\n  color: ',";\n"]);return p=function(){return n},n}function h(){var n=Object(f.a)(["\n  display: flex;\n  padding: 10px 0;\n  align-items: center;\n  justify-content: space-between;\n"]);return h=function(){return n},n}function x(){var n=Object(f.a)(["\n  background-color: ",";\n  border-bottom: 2px solid ",";\n"]);return x=function(){return n},n}var m=s.d.nav(x(),(function(n){return n.theme.color.thunder}),(function(n){return n.theme.color.midGray})),O=s.d.section(h()),g=Object(s.d)(j.b)(p(),(function(n){return n.theme.color.white})),v=t(24);t(37);function w(){var n=Object(f.a)(["\n      padding: 12px 22px;\n      color: ",";\n      border: none;\n      background-color: ",";\n      &:hover {\n        box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n      }\n    "]);return w=function(){return n},n}function y(){var n=Object(f.a)(["\n      margin-top: 24px;\n    "]);return y=function(){return n},n}function k(){var n=Object(f.a)(["\n  background-color: transparent;\n  color: ",";\n  font-size: 16px;\n  line-height: 130%;\n  padding: 12px 22px;\n  border: 2px solid ",";\n  border-radius: 15px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  &:hover {\n    background-color: ",";\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n  }\n  ","\n  ","\n"]);return k=function(){return n},n}var U=s.d.button(k(),(function(n){return n.theme.color.white}),(function(n){return n.theme.color.buttonBorder}),(function(n){return n.theme.color.buttonBorder}),(function(n){return n.marginTop&&Object(s.c)(y())}),(function(n){return n.plain&&Object(s.c)(w(),(function(n){return n.theme.color.white}),(function(n){return n.theme.color.charade}))})),A=t(28),S=Object(A.b)({name:"user",initialState:{loading:null,user:null,error:!1},reducers:{getUser:function(n){n.loading=!0},setUser:function(n,e){var t=e.payload;n.user=t.userInfo,n.loading=!1},getUserError:function(n){n.error=!0,n.loading=!0},setTestUser:function(n){n.user={uid:"testUser",photoURL:"https://www.practicepte.com/images/clients/avatar_man.jpg",displayName:"Test User"},n.loading=!1},resetUser:function(n){n.user=null,n.error=null,n.loading=null}}}),z=function(n){return function(n){return n.user}(n).user},F=S.actions,I=(F.getUser,F.setUser),R=(F.getUserError,F.setTestUser),N=F.resetUser,T=S.reducer,D=function(n){var e=n.auth,t=Object(u.b)();return e.currentUser&&Object(r.jsx)(U,{onClick:function(){e.signOut(),setTimeout((function(){t(N())}),1e3)},children:"Sign out"})},L=(t(55),function(n){var e=n.auth,t=Object(u.b)();return Object(r.jsx)(U,{onClick:function(){var n=new l.a.auth.GoogleAuthProvider;t(N()),e.signInWithPopup(n)},children:"Sign in with Google"})});function C(){var n=Object(f.a)(["\n  margin: 0 auto;\n  max-width: 1220px;\n  @media (max-width: 1220px) {\n    width: calc(100%-32px);\n    margin: 0 16px;\n  } ;\n"]);return C=function(){return n},n}var B=s.d.div(C()),E=function(){var n=l.a.auth(),e=Object(v.a)(n),t=Object(d.a)(e,2),o=t[0],c=t[1];return Object(r.jsx)(m,{children:Object(r.jsx)(B,{children:Object(r.jsxs)(O,{children:[Object(r.jsx)(g,{to:"/room/general",children:"Chat App"}),o&&!c?Object(r.jsx)(D,{auth:n}):Object(r.jsx)(L,{auth:n})]})})})};function G(){var n=Object(f.a)(["\n  margin-top: 22px;\n  font-size: 22px;\n  line-height: 140%;\n"]);return G=function(){return n},n}function H(){var n=Object(f.a)(["\n  font-size: 28px;\n  font-weight: bold;\n  line-height: 140%;\n"]);return H=function(){return n},n}function J(){var n=Object(f.a)(["\n  display: grid;\n  margin: 0 auto;\n  margin-top: 20vh;\n  padding: 32px;\n  text-align: center;\n  width: 40%;\n  justify-items: center;\n  background-color: ",";\n  border-radius: 15px;\n  @media (max-width: 1024px) {\n    width: unset;\n    padding: 18px;\n    max-width: 80%;\n  }\n"]);return J=function(){return n},n}var P=s.d.section(J(),(function(n){return n.theme.color.shark})),V=s.d.h2(H()),K=(s.d.p(G()),function(n){var e=n.auth,t=Object(u.b)();return Object(r.jsxs)(P,{children:[Object(r.jsxs)(V,{children:["Hi !",Object(r.jsx)("br",{})," Looks like you are not logged in."]}),Object(r.jsx)(L,{auth:e}),Object(r.jsx)(U,{marginTop:!0,plain:!0,onClick:function(){t(R())},children:"Sign in with test account"})]})}),W=function(n){var e=n.auth;return Object(u.c)(z)?Object(r.jsx)(b.a,{to:"/room/general"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(E,{}),Object(r.jsx)(K,{auth:e})]})},Y=t(43),M=t(26);function Q(){var n=Object(f.a)(['\n  text-decoration: none;\n  font-family: "Noto Sans JP", sans-serif;\n  font-size: 18px;\n  line-height: 130%;\n  padding: 10px 16px;\n  border: none;\n  color: ',";\n  background-color: ",";\n  border-radius: 15px;\n"]);return Q=function(){return n},n}function X(){var n=Object(f.a)(["\n  display: grid;\n  grid-gap: 6px;\n  margin-top: 16px;\n"]);return X=function(){return n},n}function Z(){var n=Object(f.a)(['\n  font-family: "Noto Sans JP", sans-serif;\n  font-size: 22px;\n  line-height: 130%;\n  margin-top: 16px;\n']);return Z=function(){return n},n}function _(){var n=Object(f.a)([""]);return _=function(){return n},n}var q=s.d.div(_()),$=s.d.header(Z()),nn=s.d.div(X()),en=Object(s.d)(j.b)(Q(),(function(n){return n.theme.color.white}),(function(n){return n.theme.color.charade})),tn=function(n,e){return n.members&&n.members.some((function(n){return n===e}))||!n.private?Object(r.jsx)(en,{to:"/room/".concat(n.ref),children:n.title},"".concat(n.ref)):null},rn=function(n){var e=n.firestore,t=Object(u.c)(z),c=Object(b.f)().roomRef,i=e.collection("chatrooms"),a=Object(M.a)(i),s=Object(d.a)(a,1)[0],f=Object(o.useState)(""),j=Object(d.a)(f,2),p=j[0],h=j[1],x=(s&&s.find((function(n){return c===n.ref})),t?t.uid:null);return Object(r.jsxs)(q,{children:[Object(r.jsxs)("form",{Style:"margin-top:32px",onSubmit:function(n){n.preventDefault();var e=Object(Y.a)(),t=[x];try{""!==p.trim()&&(i.doc(e).set({createdAt:l.a.firestore.FieldValue.serverTimestamp(),title:p,creator:x,ref:e,private:!1,members:t}),h(""))}catch(n){console.log(n)}},children:[Object(r.jsx)("input",{placeholder:"New chatroom title",value:p,onChange:function(n){h(n.target.value)}}),Object(r.jsx)("button",{children:"Add a new room"})]}),Object(r.jsx)($,{children:"Chatrooms:"}),Object(r.jsx)(nn,{children:s?s.map((function(n){return tn(n,x)})):""})]})},on=t(34),cn=t.n(on),an=t(42);function un(){var n=Object(f.a)(["\n  padding: 12px 20px;\n  font-size: 26px;\n  background-color: #333;\n  border: none;\n  color: white;\n"]);return un=function(){return n},n}function sn(){var n=Object(f.a)(['\n  font-family: "Roboto", sans-serif;\n  padding: 12px;\n  flex-grow: 1;\n  font-size: 16px;\n  color: #ddd;\n  background-color: #222;\n  border-radius: 0;\n  border: none;\n  &::placeholder {\n  }\n  &:focus {\n    border: none;\n    outline: none;\n    background-color: #333;\n  }\n']);return sn=function(){return n},n}function dn(){var n=Object(f.a)(["\n  width: calc(1220px - 300px);\n  max-width: 1220px;\n  margin: 0 auto;\n  padding: 0;\n  display: flex;\n  position: fixed;\n  bottom: 0;\n  @media (max-width: 1200px) {\n    width: calc(100% - 332px);\n  }\n"]);return dn=function(){return n},n}function ln(){var n=Object(f.a)(["\n  font-size: 12px;\n  text-align: center;\n  flex-grow: 0;\n  color: #ccc;\n  margin: 0 8px;\n"]);return ln=function(){return n},n}function bn(){var n=Object(f.a)(["\n      background-color: #4447e2;\n      border-top-left-radius: 10px;\n      border-bottom-right-radius: 0;\n    "]);return bn=function(){return n},n}function fn(){var n=Object(f.a)(["\n  position: relative;\n  font-size: 15px;\n  line-height: 140%;\n  background-color: #1c1c24;\n  padding: 8px 12px;\n  margin: 0 8px;\n  border-radius: 10px;\n  border-top-left-radius: 0;\n  ","\n"]);return fn=function(){return n},n}function jn(){var n=Object(f.a)(["\n      transform: translateY(20px);\n    "]);return jn=function(){return n},n}function pn(){var n=Object(f.a)(["\n  width: 45px;\n  border-radius: 50%;\n  align-self: flex-start;\n  transform: translateY(-10px);\n  ",";\n"]);return pn=function(){return n},n}function hn(){var n=Object(f.a)(["\n  font-size: 13px;\n  position: absolute;\n  transform: translateY(-39px) translateX(-5px);\n  color: ",";\n"]);return hn=function(){return n},n}function xn(){var n=Object(f.a)(["\n      flex-direction: row-reverse;\n    "]);return xn=function(){return n},n}function mn(){var n=Object(f.a)(["\n  display: flex;\n  width: 100%;\n  align-items: center;\n  margin-top: 16px;\n  ","\n"]);return mn=function(){return n},n}function On(){var n=Object(f.a)(["\n  list-style: none;\n  display: flex;\n  flex-direction: column;\n  margin: 0px;\n  padding: 16px;\n"]);return On=function(){return n},n}function gn(){var n=Object(f.a)(["\n  max-width: 100%;\n  position: relative;\n"]);return gn=function(){return n},n}function vn(){var n=Object(f.a)(['\n  font-family: "Noto Sans JP", sans-serif;\n  margin-top: 30px;\n  text-align: center;\n  font-weight: 500;\n  font-size: 26px;\n  line-height: 20px;\n  &:first-letter {\n    text-transform: uppercase;\n  }\n']);return vn=function(){return n},n}var wn=s.d.header(vn()),yn=s.d.div(gn()),kn=s.d.ul(On()),Un=s.d.li(mn(),(function(n){return n.isAuthor&&Object(s.c)(xn())})),An=s.d.p(hn(),(function(n){return n.theme.color.midGray})),Sn=s.d.img(pn(),(function(n){return n.isAuthor&&Object(s.c)(jn())})),zn=s.d.p(fn(),(function(n){return n.isAuthor&&Object(s.c)(bn())})),Fn=s.d.div(ln()),In=s.d.form(dn()),Rn=s.d.input(sn()),Nn=s.d.button(un()),Tn=function(n){return{text:"Hello ! This is a beginning of the #".concat(n&&n.title," channel")}},Dn=function(n,e){var t,o=n.uid===e.uid;return t=n.authorName?n.authorName:null,console.log(t),Object(r.jsxs)(Un,{isAuthor:o,children:[Object(r.jsx)(Sn,{isAuthor:o,alt:"avatar",src:n.photoURL}),Object(r.jsxs)(zn,{isAuthor:o,children:[Object(r.jsx)(An,{children:t}),n.text]}),Object(r.jsx)(Fn,{children:n.createdAt?"".concat(new Date(1e3*n.createdAt.seconds).toLocaleTimeString(),"\n                     ").concat(new Date(1e3*n.createdAt.seconds).toLocaleDateString()):""})]},"".concat(n.id).concat(n.uid))},Ln=function(n){var e=n.firebase,t=Object(u.c)(z),c=e.firestore(),i=Object(b.f)().roomRef,a=c.collection("chatrooms"),s=a.doc(i).collection("messages"),l=Object(M.a)(a),f=Object(d.a)(l,1)[0],j=s.orderBy("createdAt"),p=Object(M.a)(j),h=Object(d.a)(p,1)[0],x=f?f.find((function(n){return i===n.ref})):null,m=Tn(x),O=Object(o.useRef)(),g=Object(o.useState)(""),v=Object(d.a)(g,2),w=v[0],y=v[1];Object(o.useEffect)((function(){O.current&&O.current.scrollIntoView({behavior:"smooth"})}),[h]);var k=function(){var n=Object(an.a)(cn.a.mark((function n(r){var o,c;return cn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),o=t.uid,c=t.photoURL,""===w.trim()){n.next=6;break}return n.next=5,s.add({text:w,createdAt:e.firestore.FieldValue.serverTimestamp(),uid:o,photoURL:c,authorName:t.displayName});case 5:y("");case 6:O.current&&O.current.scrollIntoView({behavior:"smooth"});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return t&&Object(r.jsxs)(yn,{children:[Object(r.jsxs)(wn,{children:["# ",x?x.title:""]}),Object(r.jsxs)(kn,{children:[h&&h.length?h.map((function(n){return Dn(n,t)})):Object(r.jsx)(Un,{isAuthor:!1,children:Object(r.jsx)(zn,{children:m.text})}),Object(r.jsx)("div",{ref:O})]}),Object(r.jsxs)(In,{onSubmit:k,children:[Object(r.jsx)(Rn,{placeholder:"Write a message here",value:w,onChange:function(n){y(n.target.value)}}),Object(r.jsx)(Nn,{children:"\u2b06\ufe0f"})]})]})};function Cn(){var n=Object(f.a)(["\n  display: grid;\n  width: 100%;\n  grid-template-columns: 300px 1fr;\n"]);return Cn=function(){return n},n}var Bn=s.d.div(Cn()),En=function(n){var e=n.firebase,t=Object(u.c)(z),o=e.firestore(),c=e.auth(),i=Object(v.a)(c),a=Object(d.a)(i,1)[0];return t?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(B,{children:Object(r.jsxs)(Bn,{children:[Object(r.jsx)(rn,{db:e,firestore:o,auth:c}),Object(r.jsx)(Ln,{firebase:e,user:a,firestore:o,auth:c})]})})}):Object(r.jsx)(b.a,{to:"/login"})};l.a.initializeApp({apiKey:"AIzaSyDWBkQjdvZjHIpip9Z1bm9IpDmzc1XxQmM",authDomain:"react-firebase-chat-app-505e9.firebaseapp.com",databaseURL:"https://react-firebase-chat-app-505e9.firebaseio.com",projectId:"react-firebase-chat-app-505e9",storageBucket:"react-firebase-chat-app-505e9.appspot.com",messagingSenderId:"56873190707",appId:"1:56873190707:web:ae292904dd7bcdb7542a46",measurementId:"G-NKK3HT6H63"});var Gn=function(){var n=l.a?l.a.auth():null,e=Object(v.a)(n),t=Object(d.a)(e,1)[0],c=Object(u.b)(),i=Object(u.c)(z);return Object(o.useEffect)((function(){if(!i&&t){var n=t.uid,e=t.photoURL,r=t.displayName;c(I({userInfo:{uid:n,photoURL:e,displayName:r}}))}})),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.b,{path:"/",children:Object(r.jsx)(b.a,{to:"/room/general",firebase:l.a})}),Object(r.jsxs)(b.b,{path:"/room/:roomRef",children:[Object(r.jsx)(E,{firebase:l.a}),Object(r.jsx)(En,{firebase:l.a})]}),Object(r.jsx)(b.b,{path:"/login",children:Object(r.jsx)(W,{auth:n})})]})};function Hn(){var n=Object(f.a)(["\n    *,*::before,*::after{\n    box-sizing:border-box;\n    }\n    body {\n    margin: 0;\n    color: ",";\n    background-color: ",";\n    font-family: 'Roboto', sans-serif;\n    }\n"]);return Hn=function(){return n},n}var Jn=Object(s.b)(Hn(),(function(n){return n.theme.color.white}),(function(n){return n.theme.color.woodsmoke})),Pn={color:{charade:"#2D2D3A",midGray:"#5F5F6E",thunder:"#231F20",shark:"#1C1C24",woodsmoke:"#131419",buttonBorder:"#4447E2",white:"#FFFFFF"}},Vn=t(18),Kn=Object(Vn.c)({user:T}),Wn=Object(A.a)({reducer:Kn});a.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(u.a,{store:Wn,children:Object(r.jsxs)(s.a,{theme:Pn,children:[Object(r.jsx)(Jn,{}),Object(r.jsx)(j.a,{children:Object(r.jsx)(Gn,{})})]})})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.b08ddcaf.chunk.js.map